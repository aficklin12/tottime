{% extends 'tottimeapp/base.html' %}
{% load static %} 
{% load custom_filters %}
{% load dict_extras %}
{% block title %}Daily Attendance{% endblock %}

{% block styles %}
<style>
  
</style>
{% endblock %}

{% block content %}
                <div class="mt-4">
                    <h1>Daily Attendance</h1>
                </div>
                <a href="{% url 'attendance_record' %}" class="btn btn-secondary" style="margin-left: 15px;">
                    Attendance Records
                </a>
<table>
    <thead>
        <tr>
            <th>Classroom</th>
            <th>Ratio</th>
            <th>Assigned Teachers</th>
            <th>Assign/Reassign Teacher</th>
        </tr>
    </thead>
    <tbody>
        {% for classroom in classroom_data %}
        <tr>
            <td>{{ classroom.name }}</td>
            <td>{{ classroom.ratio|default:"â€“" }}</td>
            <td>
                {% if classroom.teachers %}
                    {{ classroom.teachers|join:", " }}
                {% else %}
                    <em>No teachers assigned</em>
                {% endif %}
            </td>
            <td>
                <form method="post" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="classroom_id" value="{{ classroom.id }}">
                    <select name="teacher_type">
                        <option value="main">MainUser</option>
                        <option value="sub">SubUser</option>
                    </select>
                    <select name="teacher_id">
                        <optgroup label="Main Users">
                            {% for teacher in main_teachers %}
                                <option value="{{ teacher.id }}">{{ teacher.get_full_name }}</option>
                            {% endfor %}
                        </optgroup>
                        <optgroup label="Sub Users">
                            {% for teacher in sub_teachers %}
                                <option value="{{ teacher.id }}">{{ teacher.user.get_full_name }}</option>
                            {% endfor %}
                        </optgroup>
                    </select>
                    <button type="submit" class="btn btn-sm btn-primary">Assign</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
         
{% endblock %}
{% block scripts %}

{% endblock %}